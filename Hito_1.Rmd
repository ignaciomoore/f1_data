---
title: 'Exploración de datos de carreras de formula 1.'
date: "Abril 2020"
author: ''
output:
  html_document:
    theme: default
    toc: no
  pdf_document:
    toc: no
---

### Integrantes: Ignacio Moore - José Rubio Fabián Sepúlveda

# Introducción

La velocidad ha despertado desde hace mucho tiempo una gran cantidad de pasiones, desde la antigüedad el ser humano ha ha intentado desplazarse lo más rápido y eficientemente posible desde un sitio a otro. Inicialmente, los desplazamientos por tierra más rapidos se realizaron mediante la domesticación de algunos animales como el caballo o camello, sin embargo no fue hasta el siglo XIX donde se pudo dar un gran salto en los medios de transporte con la invención de la locomotora y la aparición de los primeros vehiculos. Este crecimiento se hizo excepcional con la invención del motor de combustión interna por parte del alemán Nikolaus Otto en 1886.

El motor de combustión interna permitió la fabricación de toda clase de vehiculos como motocicletas, automoviles, camionetas, camiones, aviones, etc. Dentro de toda esta clase de máquinas tambien se desarrollaron los automóviles de carreras con la finalidad de realizar competiciones entre los distintos fabricantes de vehiculos.

Dentro de las competiciones de automoviles, destaca el campeonato mundial de la fórmula 1 de la FIA mas conocida como la fórmula 1 o F1. Esta corresponde a la máxima competición automovilstica de todo el mundo, ademas de ser el deporte motor mas prestigioso de todo el orbe. Dada la importancia de este evento y la cantidad de dinero que mueve actualmente, los datos relacionados a los circuitos, caracteristicas de los automóviles, información de los pilotos, etc corresponde a información interesante de analizar. Dado esto, para el proyecto semestral del curso se utilizaran distintos tipos de información relacionada a esta competición con la finalidad de encontrar comportamientos no intuitivos en estas bases de datos. Con esots patrones se pueden desarrollar modelos que pueden llegar a estimar una gran cantidad de enventos futuros

Utilizando la data se espera obtener un sistema donde se encuentre (*Insertar hipotesis*) y verificar su comportamiento, para esto se desarrollara el siguiente avance donde inicialmente se mostrará la forma que tienen los datos y analizando el tipo de información que contiene entonces se gráficaran distintos tipos de datos.


# Descripción de los datos y exploración inicial.

```{r}
circuits <- read.csv(file = "Data/circuits.csv", header = TRUE)
circuits$url <- NULL

constructorResults <- read.csv(file = "Data/constructorResults.csv", header = TRUE)

constructors <- read.csv(file = "Data/constructors.csv", header = TRUE)
constructors$X <- NULL
constructors$url <- NULL

constructorStandings <- read.csv(file = "Data/constructorStandings.csv", header = TRUE)
constructorStandings$X <- NULL

drivers <- read.csv(file = "Data/drivers.csv", header = TRUE)
drivers$url <- NULL

driverStandings <- read.csv(file = "Data/driverStandings.csv", header = TRUE)

lapTimes <- read.csv(file = "Data/lapTimes.csv", header = TRUE)

pitStops <- read.csv(file = "Data/pitStops.csv", header = TRUE)

qualifying <- read.csv(file = "Data/qualifying.csv", header = TRUE)

races <- read.csv(file = "Data/races.csv", header = TRUE)
races$url <- NULL

results <- read.csv(file = "Data/results.csv", header = TRUE)

seasons <- read.csv(file = "Data/seasons.csv", header = TRUE)
seasons$url <- NULL

status <- read.csv(file = "Data/status.csv", header = TRUE)

countryNationalities <- read.csv(file = "Data/countryNationalities.csv", header = TRUE)
```


```{r}

# CANTIDAD DE CORREDORES POR PAIS

numberOfDriversByNationality <- aggregate(driverId ~ nationality, drivers, length)
names(numberOfDriversByNationality)[names(numberOfDriversByNationality) == 'driverId'] <- 'numberOfDrivers'

library(ggplot2)

ggplot(numberOfDriversByNationality) +
  geom_bar(aes(x = reorder(nationality, numberOfDrivers), y = numberOfDrivers), stat = "identity") +
  coord_flip() +
  ggtitle("Cantidad de Conductores por Nacionalidad") +
  xlab("Nacionalidad") + ylab("Cantidad de Conductores")

```



```{r}

# CANTIDAD DE CARRERAS POR PAIS

racesByCircuit <- merge(circuits, races, by = "circuitId")
names(racesByCircuit)[names(racesByCircuit) == "name.x"] <- "circuitName"
names(racesByCircuit)[names(racesByCircuit) == "name.y"] <- "raceName"

numberOfRacesByCountry <- aggregate(raceId ~ country, racesByCircuit, length)
names(numberOfRacesByCountry)[names(numberOfRacesByCountry) == "raceId"] <- "numberOfRaces"

ggplot(numberOfRacesByCountry) +
  geom_bar(aes(x = reorder(country, numberOfRaces), y = numberOfRaces), stat = "identity") +
  coord_flip() +
  ggtitle("Cantidad de Carreras por Pais") +
  xlab("Pais") + ylab("Cantidad de Carreras")

```



```{r}

# CARRERAS EN QUE COINCIDEN CON CONDUCTORES

driversWithCountry <- merge(drivers, countryNationalities, by = "nationality")
names(driversWithCountry)[names(driversWithCountry) == "country"] <- "driverCountry"

homeDrivers <- merge(merge(driversWithCountry, results, by = "driverId"), racesByCircuit, by = "raceId")
names(homeDrivers)[names(homeDrivers) == "country"] <- "circuitCountry"

names(homeDrivers)

homeDrivers <- subset(homeDrivers, select = c("driverCountry", "circuitCountry", "driverRef", "raceName", "circuitName", "raceId", "driverId"))

homeDrivers[,1] <- factor(homeDrivers[,1], levels = levels(homeDrivers[,2]))

homeDrivers <- subset(homeDrivers, homeDrivers$circuitCountry == homeDrivers$driverCountry)

homeDriversByCountry <- aggregate(raceId + driverId ~ circuitCountry, homeDrivers, length)
names(homeDriversByCountry)[names(homeDriversByCountry) == "raceId + driverId"] <- "numberOfParticipations"

names(homeDriversByCountry)

ggplot(homeDriversByCountry) +
  geom_bar(aes(x = reorder(circuitCountry, numberOfParticipations), y = numberOfParticipations), stat = "identity") +
  coord_flip() +
  ggtitle("Cantidad de veces que Conductores han Participado en su Pais") +
  xlab("Pais") + ylab("Cantidad de veces que han participado")

```

### Ganadores por país.
Filtrando los resultados para obtener las nacionalidades de aquellos conductores que ganaron los circuitos.
```{r}
winners <- results[results$positionOrder == 1,]
winners_data <- merge(winners,nationality, by='driverId')
winners_by_country <- aggregate(position ~ country, winners_data, length)
names(winners_by_country)[names(winners_by_country) == "position"] <- "races_won"
ggplot(winners_by_country) +
  geom_bar(aes(x=reorder(country, races_won),y=races_won),stat="identity") +
  coord_flip() +
  ggtitle("Paises Ganadores de la formula 1") +
  xlab("Cantidad") +
  ylab("País")
```

### Fabricantes ganadores por país.
Similar al anterior, salvo que en este caso se obtendra el id de los fabricantes ganadores.

# Temática del problema.



# Contribuciones de los miembros del equipo






